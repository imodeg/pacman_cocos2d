require=function e(t,s,r){function i(o,a){if(!s[o]){if(!t[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(n)return n(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=s[o]={exports:{}};t[o][0].call(h.exports,function(e){var s=t[o][1][e];return i(s||e)},h,h.exports,e,t,s,r)}return s[o].exports}for(var n="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({Block:[function(e,t,s){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}cc._RF.push(t,"2da2fQJrDNGqos5KlGb1MzZ","Block");var o=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),a=(e("GameConstants").gameCfg,function(e){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments[3],a=arguments[4];r(this,t);var c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"block"));c.sprite=c.addComponent(cc.Sprite),c.parent=e,c.x=s,c.y=n,c.posX=o,c.posY=a,c.group="wall";var l=cc.url.raw("resources/block3.png"),h=cc.textureCache.addImage(l);return c.sprite.spriteFrame=new cc.SpriteFrame(h),c.anchorX=.5,c.anchorY=.5,c}return n(t,cc.Node),o(t,[{key:"setImage",value:function(e){var t=cc.url.raw(e),s=cc.textureCache.addImage(t);this.sprite.spriteFrame=new cc.SpriteFrame(s)}}]),t}());t.exports.Block=a,cc._RF.pop()},{GameConstants:"GameConstants"}],ButtonControls:[function(e,t,s){"use strict";cc._RF.push(t,"9e036EYZN1GTKnPanbNvb1I","ButtonControls");var r=e("Controls").controls;cc.Class({extends:cc.Component,properties:{buttonLeft:cc.Button,buttonRight:cc.Button,buttonUp:cc.Button,buttonDown:cc.Button},onLoad:function(){101==cc.sys.platform&&(this.buttonLeft.enabled=!1,this.buttonRight.enabled=!1,this.buttonUp.enabled=!1,this.buttonDown.enabled=!1,this.buttonLeft.node.opacity=0,this.buttonRight.node.opacity=0,this.buttonUp.node.opacity=0,this.buttonDown.node.opacity=0)},start:function(){},upButtonUp:function(){r.isUpPressed=!1},upButtonDown:function(){r.isDownPressed=!1},upButtonLeft:function(){r.isLeftPressed=!1},upButtonRight:function(){r.isRightPressed=!1},update:function(e){this.buttonUp._pressed&&0==r.isUpPressed&&r.isActive&&(r.isUpPressed=!0,r.isDownPressed=!1,r.isLeftPressed=!1,r.isRightPressed=!1),this.buttonDown._pressed&&0==r.isDownPressed&&r.isActive&&(r.isUpPressed=!1,r.isDownPressed=!0,r.isLeftPressed=!1,r.isRightPressed=!1),this.buttonLeft._pressed&&0==r.isLeftPressed&&r.isActive&&(r.isUpPressed=!1,r.isLeftPressed=!0,r.isDownPressed=!1,r.isRightPressed=!1),this.buttonRight._pressed&&0==r.isRightPressed&&r.isActive&&(r.isUpPressed=!1,r.isRightPressed=!0,r.isLeftPressed=!1,r.isDownPressed=!1)}}),cc._RF.pop()},{Controls:"Controls"}],Controls:[function(e,t,s){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}cc._RF.push(t,"3702aD7R+dF7qm3rYAsYI4Y","Controls");var i=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),n=new(function(){function e(){r(this,e),this.isActive=!1,this.isUpPressed=!1,this.isDownPressed=!1,this.isLeftPressed=!1,this.isRightPressed=!1}return i(e,[{key:"cons",value:function(){console.log("tesst")}},{key:"controlsEnable",value:function(){this.isActive=!0,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)}},{key:"controlsDisable",value:function(){this.isActive=!1,cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.isUpPressed=!1,this.isDownPressed=!1,this.isLeftPressed=!1,this.isRightPressed=!1}},{key:"onKeyDown",value:function(e){switch(e.keyCode){case cc.KEY.a:case cc.KEY.left:this.isLeftPressed=!0;break;case cc.KEY.d:case cc.KEY.right:this.isRightPressed=!0;break;case cc.KEY.w:case cc.KEY.up:this.isUpPressed=!0;break;case cc.KEY.s:case cc.KEY.down:this.isDownPressed=!0}}},{key:"onKeyUp",value:function(e){switch(e.keyCode){case cc.KEY.a:case cc.KEY.left:this.isLeftPressed=!1;break;case cc.KEY.d:case cc.KEY.right:this.isRightPressed=!1;break;case cc.KEY.w:case cc.KEY.up:this.isUpPressed=!1;break;case cc.KEY.s:case cc.KEY.down:this.isDownPressed=!1}}}]),e}());t.exports.controls=n,cc._RF.pop()},{}],Dot:[function(e,t,s){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}cc._RF.push(t,"ce0528YhDFGOrI+OgGkkBbj","Dot");var o=function(e){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments[3],a=arguments[4];r(this,t);var c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"dot"));c.sprite=c.addComponent(cc.Sprite),c.parent=e,c.x=s,c.y=n,c.posX=o,c.posY=a,c.group="dot";var l=cc.url.raw("resources/dot.png"),h=cc.textureCache.addImage(l);return c.sprite.spriteFrame=new cc.SpriteFrame(h),c.anchorX=.5,c.anchorY=.5,c}return n(t,cc.Node),t}(),a=function(e){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments[3],a=arguments[4];r(this,t);var c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"bigdot"));c.sprite=c.addComponent(cc.Sprite),c.parent=e,c.x=s,c.y=n,c.posX=o,c.posY=a,c.group="bigdot";var l=cc.url.raw("resources/bigdot.png"),h=cc.textureCache.addImage(l);return c.sprite.spriteFrame=new cc.SpriteFrame(h),c.anchorX=.5,c.anchorY=.5,c}return n(t,cc.Node),t}();t.exports.Dot=o,t.exports.BigDot=a,cc._RF.pop()},{}],Enemy:[function(e,t,s){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}cc._RF.push(t,"1fef3jtBTNJFqFMC9EXUKp5","Enemy");var o=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),a=e("GameConstants").gameCfg,c=e("SpriteAnimated").SpriteAnimated,l=function(e){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"enemy"));return o.sprite=o.addComponent(c),o.map=e,o.parent=e,o.startX=s,o.startY=n,o.x=s,o.y=n,o.group="enemy",o.isActive=!1,o.isStoped=!1,o.lastMove="none",o.moveTime=.5,o.isEatible=!0,o.sprite.addAnimation("idle",1,["resources/ghost_red_right1.png"]),o.sprite.addAnimation("run",1,["resources/ghost_red_right1.png","resources/ghost_red_right2.png"]),o.sprite.addAnimation("runLeft",1,["resources/ghost_red_left1.png","resources/ghost_red_left2.png"]),o.sprite.addAnimation("runAttackable",1,["resources/ghost_attackable1.png","resources/ghost_attackable2.png"]),o.sprite.addAnimation("runDeath",1,["resources/ghost_dead1.png","resources/ghost_dead2.png"]),o.sprite.setAnimation("run"),o.sprite.start(),o.sprite.play(),o.anchorX=.5,o.anchorY=.5,o.zIndex=1,o}return n(t,cc.Node),o(t,[{key:"start",value:function(){this.isStoped=!1,this.sprite.play(),this.isActive=!0}},{key:"stop",value:function(){this.isStoped=!0,this.isActive=!1}},{key:"restart",value:function(){this.sprite.setAnimation("run"),this.x=this.startX,this.y=this.startY,this.stop(),this.isEatible=!0}},{key:"death",value:function(){var e=this;this.isEatible=!1,this.stop(),this.sprite.setAnimation("runDeath");var t=cc.delayTime(.5),s=cc.callFunc(function(){e.x=e.startX,e.y=e.startY},this);this.runAction(cc.sequence(t,s));var r=cc.delayTime(2),i=cc.callFunc(function(){e.sprite.setAnimation("run"),e.restart(),e.start(),e.isEatible=!0},this);this.runAction(cc.sequence(r,i))}},{key:"update",value:function(e){this.enemyPos=this.map.getCellPosFromCoordinates(this.x,this.y),this.isActive&&(this.moveDecide(this.enemyPos.posX,this.enemyPos.posY),this.isActive=!1),this.enemyPos.posX<=1&&(this.x=this.map.getVecFromCellPos(this.map.levelArray[0].length-3,0).x+a.cellSize/2),this.enemyPos.posX>=this.map.levelArray[0].length-2&&(this.x=this.map.getVecFromCellPos(2,0).x-a.cellSize/2)}},{key:"startActiveTimer",value:function(){var e=this,t=void 0,s=void 0;t=cc.delayTime(this.moveTime),s=cc.callFunc(function(){e.isStoped||(e.isActive=!0)},this),this.runAction(cc.sequence(t,s))}},{key:"moveDirection",value:function(e){var t=void 0;switch(e){case"up":t=new cc.MoveBy(this.moveTime,cc.p(0,a.cellSize)),this.runAction(t),this.startActiveTimer();break;case"right":t=new cc.MoveBy(this.moveTime,cc.p(a.cellSize,0)),this.runAction(t),this.startActiveTimer();break;case"down":t=new cc.MoveBy(this.moveTime,cc.p(0,-a.cellSize)),this.runAction(t),this.startActiveTimer();break;case"left":t=new cc.MoveBy(this.moveTime,cc.p(-a.cellSize,0)),this.runAction(t),this.startActiveTimer()}}},{key:"moveDecide",value:function(e,t){var s=this.map.levelArray[t-1][e];1!=s&&(s=0);var r=this.map.levelArray[t][e+1];1!=r&&(r=0);var i=this.map.levelArray[t+1][e];1!=i&&(i=0);var n=this.map.levelArray[t][e-1];1!=n&&(n=0);var o=void 0,a="left";switch(s.toString()+r.toString()+i.toString()+n.toString()){case"0000":0==(o=Math.floor(4*Math.random()))?a="left":1==o?a="up":2==o?a="right":3==o&&(a="down"),this.moveDirection(a),this.lastMove=a;break;case"1000":0==(o=Math.floor(3*Math.random()))?a="left":1==o?a="down":2==o&&(a="right"),this.moveDirection(a),this.lastMove=a;break;case"0100":0==(o=Math.floor(3*Math.random()))?a="left":1==o?a="up":2==o&&(a="down"),this.moveDirection(a),this.lastMove=a;break;case"0010":0==(o=Math.floor(3*Math.random()))?a="left":1==o?a="up":2==o&&(a="right"),this.moveDirection(a),this.lastMove=a;break;case"0001":0==(o=Math.floor(3*Math.random()))?a="up":1==o?a="right":2==o&&(a="down"),this.moveDirection(a),this.lastMove=a;break;case"1100":1==(o=Math.floor(2*Math.random()))&&(a="down"),this.moveDirection(a),this.lastMove=a;break;case"0110":1==(o=Math.floor(2*Math.random()))&&(a="up"),this.moveDirection(a),this.lastMove=a;break;case"0011":0==(o=Math.floor(2*Math.random()))?a="right":1==o&&(a="up"),this.moveDirection(a),this.lastMove=a;break;case"1001":0==(o=Math.floor(2*Math.random()))?a="right":1==o&&(a="down"),this.moveDirection(a),this.lastMove=a;break;case"1110":a="left",this.moveDirection(a),this.lastMove=a;break;case"0111":a="up",this.moveDirection(a),this.lastMove=a;break;case"1011":a="right",this.moveDirection(a),this.lastMove=a;break;case"1101":a="down",this.moveDirection(a),this.lastMove=a;break;case"1111":break;case"1010":case"0101":this.moveDirection(this.lastMove)}}}]),t}();t.exports.Enemy=l,cc._RF.pop()},{GameConstants:"GameConstants",SpriteAnimated:"SpriteAnimated"}],GameConstants:[function(e,t,s){"use strict";cc._RF.push(t,"ad6dbsZSQxDqLSV4TkLWFYF","GameConstants");var r={cellSize:24};t.exports.gameCfg=r,cc._RF.pop()},{}],Map:[function(e,t,s){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}cc._RF.push(t,"729fcXKCnVJK6FwR2KVIBy3","Map");var o=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),a=e("GameConstants").gameCfg,c=e("Block").Block,l=e("Player").Player,h=e("Dot").Dot,p=e("Dot").BigDot,u=e("Enemy").Enemy,y=function(e){function t(e,s){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"map"));n.parent=e,n.gameComponent=s,n.enemyArray=[],n.dotsCount=0,n.levelArray=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,1,3,3,3,3,3,3,3,3,1,3,3,3,3,3,3,3,3,1,0,0],[0,0,1,3,1,1,3,1,1,1,3,1,3,1,1,1,3,1,1,3,1,0,0],[0,0,1,4,1,1,3,1,1,1,3,1,3,1,1,1,3,1,1,4,1,0,0],[0,0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,0,0],[0,0,1,3,1,1,3,1,3,1,1,1,1,1,3,1,3,1,1,3,1,0,0],[0,0,1,3,3,3,3,1,3,3,3,1,3,3,3,1,3,3,3,3,1,0,0],[0,0,1,1,1,1,3,1,1,1,3,1,3,1,1,1,3,1,1,1,1,0,0],[0,0,1,0,0,1,3,1,3,3,3,3,3,3,3,1,3,1,0,0,1,0,0],[0,0,1,1,1,1,3,1,3,1,1,0,1,1,3,1,3,1,1,1,1,0,0],[0,0,0,3,3,3,3,3,3,1,5,5,5,1,3,3,3,3,3,3,0,0,0],[0,0,1,1,1,1,3,1,3,1,1,1,1,1,3,1,3,1,1,1,1,0,0],[0,0,1,0,0,1,3,1,3,3,3,3,3,3,3,1,3,1,0,0,1,0,0],[0,0,1,1,1,1,3,1,3,1,1,1,1,1,3,1,3,1,1,1,1,0,0],[0,0,1,3,3,3,3,3,3,3,3,1,3,3,3,3,3,3,3,3,1,0,0],[0,0,1,3,1,1,3,1,1,1,3,1,3,1,1,1,3,1,1,3,1,0,0],[0,0,1,4,3,1,3,3,3,3,3,2,3,3,3,3,3,1,3,4,1,0,0],[0,0,1,1,3,1,3,1,3,1,1,1,1,1,3,1,3,1,3,1,1,0,0],[0,0,1,3,3,3,3,1,3,3,3,1,3,3,3,1,3,3,3,3,1,0,0],[0,0,1,3,1,1,1,1,1,1,3,1,3,1,1,1,1,1,1,3,1,0,0],[0,0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],n.entitiesArray=[];for(var o=0;o<n.levelArray[0].length;o++)n.entitiesArray.push(new Array(n.levelArray.length));n.levelPosX=a.cellSize*n.levelArray[0].length/2-a.cellSize/2,n.levelPosY=a.cellSize*n.levelArray.length/2-a.cellSize/2,n.parseLevel(n.levelArray),n.start(),n.winImage=new cc.Node("winimage"),n.winImage.parent=n;var c=n.winImage.addComponent(cc.Sprite),l=cc.url.raw("resources/winner.png"),h=cc.textureCache.addImage(l);return c.spriteFrame=new cc.SpriteFrame(h),n.winImage.anchorX=.5,n.winImage.anchorY=.5,n.winImage.zIndex=2,n.winImage.opacity=0,n}return n(t,cc.Node),o(t,[{key:"addScore",value:function(e){this.gameComponent.score+=e,this.gameComponent.scoreCounter.string=this.gameComponent.score.toString()}},{key:"checkForWin",value:function(){var e=this;if(this.dotsCount<=0){this.winImage.opacity=255;var t=cc.url.raw("resources/Pacman-win.mp3");cc.audioEngine.playEffect(t),this.player.stop();for(var s=0;s<this.enemyArray.length;s++)this.enemyArray[s].stop();var r=cc.delayTime(1.8),i=cc.callFunc(function(){e.gameComponent.restartFull()},this);this.runAction(cc.sequence(r,i))}}},{key:"start",value:function(){var e=this,t=cc.url.raw("resources/Pacman-sound.mp3");cc.audioEngine.playEffect(t);var s=cc.delayTime(4),r=cc.callFunc(function(){e.player.start();for(var t=0;t<e.enemyArray.length;t++)e.enemyArray[t].start()},this);this.runAction(cc.sequence(s,r))}},{key:"stop",value:function(){for(var e=this,t=0;t<this.enemyArray.length;t++)this.enemyArray[t].stop();var s=cc.delayTime(3),r=cc.callFunc(function(){e.restart()},this);this.runAction(cc.sequence(s,r))}},{key:"restart",value:function(){this.player.restart();for(var e=0;e<this.enemyArray.length;e++)this.enemyArray[e].restart();this.start()}},{key:"parseLevel",value:function(e){for(var t=0;t<e.length;t++)for(var s=0;s<e[t].length;s++)switch(e[t][s]){case 1:var r=this.createBlock(s,t);this.entitiesArray[s][t]=r;break;case 2:this.player=new l(this,this.getVecFromCellPos(s,t).x,this.getVecFromCellPos(s,t).y);break;case 3:var i=new h(this,this.getVecFromCellPos(s,t).x,this.getVecFromCellPos(s,t).y,s,t);this.entitiesArray[s][t]=i,this.dotsCount++;break;case 4:var n=new p(this,this.getVecFromCellPos(s,t).x,this.getVecFromCellPos(s,t).y,s,t);this.entitiesArray[s][t]=n,this.dotsCount++;break;case 5:var o=new u(this,this.getVecFromCellPos(s,t).x,this.getVecFromCellPos(s,t).y,s,t);this.enemyArray.push(o)}console.log(this.entitiesArray)}},{key:"getVecFromCellPos",value:function(e,t){var s={};return s.x=-this.levelPosX+a.cellSize*e,s.y=this.levelPosY+a.cellSize*-t,s}},{key:"createBlock",value:function(e,t){var s=new c(this,this.getVecFromCellPos(e,t).x,this.getVecFromCellPos(e,t).y,e,t),r=this.levelArray[t-1][e];1!=r&&(r=0);var i=this.levelArray[t][e+1];1!=i&&(i=0);var n=this.levelArray[t+1][e];1!=n&&(n=0);var o=this.levelArray[t][e-1];switch(1!=o&&(o=0),r.toString()+i.toString()+n.toString()+o.toString()){case"0000":s.setImage("resources/block1.png");break;case"1000":s.setImage("resources/block2.png"),s.rotation=-90;break;case"0100":s.setImage("resources/block2.png");break;case"0010":s.setImage("resources/block2.png"),s.rotation=90;break;case"0001":s.setImage("resources/block2.png"),s.rotation=180;break;case"1100":s.setImage("resources/block4.png"),s.rotation=-90;break;case"0110":s.setImage("resources/block4.png");break;case"0011":s.setImage("resources/block4.png"),s.rotation=90;break;case"1001":s.setImage("resources/block4.png"),s.rotation=180;break;case"1110":s.setImage("resources/block5.png"),s.rotation=-90;break;case"0111":s.setImage("resources/block5.png");break;case"1011":s.setImage("resources/block5.png"),s.rotation=90;break;case"1101":s.setImage("resources/block5.png"),s.rotation=180;break;case"1111":s.setImage("resources/block6.png");break;case"1010":s.setImage("resources/block3.png"),s.rotation=-90;break;case"0101":s.setImage("resources/block3.png")}return s}},{key:"getCellPosFromCoordinates",value:function(e,t){e+=a.cellSize/2;var s=Math.floor(e/a.cellSize)+Math.floor(this.levelArray[0].length/2),r=-(Math.floor(t/a.cellSize)-Math.floor(this.levelArray.length/2)+1),i={};return i.posX=s,i.posY=r,i}},{key:"startSuper",value:function(){for(var e=this,t=0;t<this.enemyArray.length;t++)this.enemyArray[t].sprite.setAnimation("runAttackable");var s=cc.delayTime(3),r=cc.callFunc(function(){e.player.isSuper=!1;for(var t=0;t<e.enemyArray.length;t++)e.enemyArray[t].sprite.setAnimation("run")},this);this.runAction(cc.sequence(s,r))}},{key:"update",value:function(e){this.player.update(e);for(var t=0;t<this.enemyArray.length;t++)this.enemyArray[t].update(e)}}]),t}();t.exports.Map=y,cc._RF.pop()},{Block:"Block",Dot:"Dot",Enemy:"Enemy",GameConstants:"GameConstants",Player:"Player"}],PacmanMain:[function(e,t,s){"use strict";cc._RF.push(t,"c3c99mkwZBI8rZ+gBbhJWrd","PacmanMain");e("GameConstants").gameCfg;var r=e("Map").Map;cc.Class({extends:cc.Component,properties:{scoreCounter:cc.Label},onLoad:function(){this.startFull(),this.score=0},restartFull:function(){this.node.removeChild(this.map,!0),this.startFull()},startFull:function(){this.map=new r(this.node,this)},update:function(e){this.map.update(e)}}),cc._RF.pop()},{GameConstants:"GameConstants",Map:"Map"}],Player:[function(e,t,s){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}cc._RF.push(t,"543ccXotmhG3LlVdIaPHAOK","Player");var o=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),a=e("GameConstants").gameCfg,c=e("Controls").controls,l=e("SpriteAnimated").SpriteAnimated,h=function(e){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"player"));return o.sprite=o.addComponent(l),o.map=e,o.parent=e,o.startX=s,o.startY=n,o.x=s,o.y=n,o.speed=1.8,o.velocity=cc.p(0,0),o.group="pacman",o.isAlive=!0,o.isSuper=!1,o.sprite.addAnimation("idle",1,["resources/pacman_01.png"]),o.sprite.addAnimation("run",1,["resources/pacman_01.png","resources/pacman_02.png"]),o.sprite.addAnimation("death",1,["resources/pacman_dead1.png","resources/pacman_dead2.png","resources/pacman_dead3.png","resources/pacman_dead4.png","resources/pacman_dead4.png","resources/pacman_dead4.png","resources/pacman_dead4.png","resources/pacman_dead4.png","resources/pacman_dead4.png","resources/pacman_dead4.png","resources/pacman_dead4.png"]),o.sprite.setAnimation("run"),o.sprite.start(),o.anchorX=.5,o.anchorY=.5,o}return n(t,cc.Node),o(t,[{key:"start",value:function(){this.isAlive=!0,c.controlsEnable()}},{key:"stop",value:function(){this.velocity.x=0,this.velocity.y=0,c.controlsDisable()}},{key:"death",value:function(){this.isAlive=!1,this.velocity.x=0,this.velocity.y=0,this.rotation=0,this.sprite.setAnimation("death"),c.controlsDisable();var e=cc.url.raw("resources/Pacman-death-sound.mp3");cc.audioEngine.playEffect(e),this.map.stop()}},{key:"restart",value:function(){this.sprite.setAnimation("run"),this.x=this.startX,this.y=this.startY}},{key:"update",value:function(e){if(this.isAlive){this.playerPos=this.map.getCellPosFromCoordinates(this.x,this.y);for(var t=this.getBoundingBox(),s=0;s<this.map.enemyArray.length;s++)if(t.intersects(this.map.enemyArray[s].getBoundingBox())&&this.map.enemyArray[s].isEatible)if(this.isSuper){if(this.map.enemyArray[s].isEatible){var r=cc.url.raw("resources/Pacman-bigdot.mp3");cc.audioEngine.playEffect(r),this.map.enemyArray[s].death(),this.map.addScore(150)}}else this.death();var i=this.map.entitiesArray[this.playerPos.posX][this.playerPos.posY];if(null!=i)if("dot"==i.group){var n=cc.url.raw("resources/Pacman-waka.mp3");cc.audioEngine.playEffect(n),this.map.removeChild(i,!0),this.map.entitiesArray[this.playerPos.posX][this.playerPos.posY]=null,this.map.dotsCount--,this.map.addScore(50),this.map.checkForWin()}else if("bigdot"==i.group){var o=cc.url.raw("resources/Pacman-waka.mp3");if(cc.audioEngine.playEffect(o),this.map.removeChild(i,!0),this.map.entitiesArray[this.playerPos.posX][this.playerPos.posY]=null,this.map.addScore(100),--this.map.dotsCount>0){var l=cc.url.raw("resources/Pacman-win.mp3");cc.audioEngine.playEffect(l),this.isSuper=!0,this.map.startSuper()}this.map.checkForWin()}var h=this.checkCollisionAround("wall",null);h?(this.sprite.pause(),0!=this.velocity.x?(this.velocity.x=0,h.x>this.x?this.x=h.x-a.cellSize:this.x=h.x+a.cellSize):0!=this.velocity.y&&(this.velocity.y=0,h.y>this.y?this.y=h.y-a.cellSize:this.y=h.y+a.cellSize)):(this.x+=this.velocity.x,this.y+=this.velocity.y),c.isLeftPressed&&!h?this.checkCollisionAround("wall","left")||(this.sprite.play(),this.velocity.x=-this.speed,this.velocity.y=0,this.rotation=180):c.isRightPressed&&!h?this.checkCollisionAround("wall","right")||(this.sprite.play(),this.velocity.x=this.speed,this.velocity.y=0,this.rotation=0):c.isUpPressed&&!h?this.checkCollisionAround("wall","up")||(this.sprite.play(),this.velocity.x=0,this.velocity.y=this.speed,this.rotation=-90):c.isDownPressed&&!h&&(this.checkCollisionAround("wall","down")||(this.sprite.play(),this.velocity.x=0,this.velocity.y=-this.speed,this.rotation=90)),this.playerPos.posX<=1&&(this.x=this.map.getVecFromCellPos(this.map.levelArray[0].length-3,0).x),this.playerPos.posX>=this.map.levelArray[0].length-2&&(this.x=this.map.getVecFromCellPos(2,0).x)}}},{key:"checkCollisionWithEntity",value:function(e,t,s){var r=s;return!(null==e||e.group!=t||!r.intersects(e.getBoundingBox()))}},{key:"checkCollisionAround",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=this.getBoundingBox(),r=void 0,i=void 0,n=void 0;switch(t){case"left":s.x-=a.cellSize;break;case"right":s.x+=a.cellSize;break;case"up":s.y+=a.cellSize;break;case"down":s.y-=a.cellSize}return null==t&&(r=this.playerPos.posX,i=this.playerPos.posY,n=this.map.entitiesArray[r][i],this.checkCollisionWithEntity(n,e,s))?n:!((null==t||"up"==t||"left"==t)&&(r=this.playerPos.posX-1,i=this.playerPos.posY-1,n=this.map.entitiesArray[r][i],this.checkCollisionWithEntity(n,e,s))||(null==t||"up"==t)&&(r=this.playerPos.posX,i=this.playerPos.posY-1,n=this.map.entitiesArray[r][i],this.checkCollisionWithEntity(n,e,s))||(null==t||"up"==t||"right"==t)&&(r=this.playerPos.posX+1,i=this.playerPos.posY-1,n=this.map.entitiesArray[r][i],this.checkCollisionWithEntity(n,e,s))||(null==t||"left"==t)&&(r=this.playerPos.posX-1,i=this.playerPos.posY,n=this.map.entitiesArray[r][i],this.checkCollisionWithEntity(n,e,s))||(null==t||"right"==t)&&(r=this.playerPos.posX+1,i=this.playerPos.posY,n=this.map.entitiesArray[r][i],this.checkCollisionWithEntity(n,e,s))||(null==t||"down"==t||"left"==t)&&(r=this.playerPos.posX-1,i=this.playerPos.posY+1,n=this.map.entitiesArray[r][i],this.checkCollisionWithEntity(n,e,s))||(null==t||"down"==t)&&(r=this.playerPos.posX,i=this.playerPos.posY+1,n=this.map.entitiesArray[r][i],this.checkCollisionWithEntity(n,e,s)))?!(null!=t&&"down"!=t&&"right"!=t||(r=this.playerPos.posX+1,i=this.playerPos.posY+1,n=this.map.entitiesArray[r][i],!this.checkCollisionWithEntity(n,e,s)))&&n:n}}]),t}();t.exports.Player=h,cc._RF.pop()},{Controls:"Controls",GameConstants:"GameConstants",SpriteAnimated:"SpriteAnimated"}],SpriteAnimated:[function(e,t,s){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}cc._RF.push(t,"18c6e90iypEjrwfJ73vt+dq","SpriteAnimated");var o=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),a=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.animationsArray=[],e.currentAnimation="idle",e.currentFrame=0,e.isStoped=!0,e}return n(t,cc.Sprite),o(t,[{key:"start",value:function(){var e=this;this.isStoped=!0;var t=cc.delayTime(.2),s=cc.callFunc(function(){e.nextFrame()},this);this.node.runAction(cc.repeatForever(cc.sequence(s,t)))}},{key:"pause",value:function(){this.isStoped=!0}},{key:"play",value:function(){this.isStoped=!1}},{key:"addAnimation",value:function(e,t,s){this.animationsArray[e]={},this.animationsArray[e].speed=t,this.animationsArray[e].spriteFrames=[];for(var r=void 0,i=void 0,n=void 0,o=0;o<s.length;o++)r=cc.url.raw(s[o]),i=cc.textureCache.addImage(r),n=new cc.SpriteFrame(i),this.animationsArray[e].spriteFrames.push(n),r=cc.url.raw(s[o]),i=cc.textureCache.addImage(r),n=new cc.SpriteFrame(i),this.animationsArray[e].spriteFrames.push(n)}},{key:"setAnimation",value:function(e){this.isStoped=!1,this.currentAnimation=e,this.currentFrame=0,this.spriteFrame=this.animationsArray[this.currentAnimation].spriteFrames[0]}},{key:"nextFrame",value:function(){this.isStoped||(++this.currentFrame>=this.animationsArray[this.currentAnimation].spriteFrames.length&&(this.currentFrame=0),this.spriteFrame=this.animationsArray[this.currentAnimation].spriteFrames[this.currentFrame])}},{key:"update",value:function(){}}]),t}();t.exports.SpriteAnimated=a,cc._RF.pop()},{}]},{},["Block","ButtonControls","Controls","Dot","Enemy","GameConstants","Map","PacmanMain","Player","SpriteAnimated"]);